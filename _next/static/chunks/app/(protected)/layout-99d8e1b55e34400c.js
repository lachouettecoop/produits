(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{5944:function(e,n,t){Promise.resolve().then(t.bind(t,6645))},6645:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var r=t(7437),a=t(9748),i=t(6463),s=t(7138),l=t(6800),c=t.n(l),d=e=>{let{link:n,label:t,Icon:a,indicator:l,classNames:d=""}=e,o=(0,i.usePathname)();return(0,r.jsxs)(s.default,{href:n,className:c()(d,{"text-white":o===n,"text-neutral-400":o!==n}),children:[(0,r.jsxs)("div",{className:c()({indicator:l}),children:[!!l&&(0,r.jsx)("span",{className:"indicator-item indicator-bottom badge badge-secondary opacity-80",children:l}),(0,r.jsx)(a,{className:"text-3xl"})]}),t]})},o=t(3005),m=t(4451),u=t(3003);let h={home:"/",cart:"/panier",commands:"/commandes",processing:"/preparations",login:"/login"},x=[{label:"Produits",link:h.home,Icon:u.N$3,withDrawer:!0,roles:[m.u.Admin,m.u.Client]},{label:"Panier",link:h.cart,Icon:u.rDQ,withDrawer:!1,roles:[m.u.Admin,m.u.Client]},{label:"Commandes",link:h.commands,Icon:u.SsP,withDrawer:!0,roles:[m.u.Admin,m.u.Client]},{label:"Pr\xe9parations",link:h.processing,Icon:u.Mgr,withDrawer:!0,roles:[m.u.Admin,m.u.Preparer]}];var b=()=>{let e=(0,a.a)(e=>e.role),n=(0,o.j)(e=>Object.values(e.cart).reduce((e,n)=>e+n,0));return x.filter(n=>n.roles.includes(e)).map(e=>{let t;return e.link===h.cart&&n&&(t=String(n)),{label:e.label,link:e.link,withDrawer:e.withDrawer,Icon:e.Icon,indicator:t}})},j=e=>{let{children:n}=e,t=b(),l=(0,i.usePathname)(),c=(0,a.a)(e=>e.name),o=t.find(e=>e.link===l);return(0,r.jsxs)("div",{className:"md:hidden",children:[(0,r.jsxs)("div",{className:"navbar bg-primary text-primary-content",children:[(null==o?void 0:o.withDrawer)&&(0,r.jsx)("div",{className:"flex-none",children:(0,r.jsx)("label",{htmlFor:"main-drawer",className:"btn btn-primary drawer-button md:hidden",children:(0,r.jsx)(u.E09,{size:"1.5rem"})})}),(0,r.jsxs)("div",{className:"flex-1 justify-between",children:[(0,r.jsx)(s.default,{href:h.home,className:"btn btn-ghost text-xl text-white",children:"Drive"}),(0,r.jsx)("div",{className:"hidden md:block m-auto",children:c}),(0,r.jsxs)("button",{className:"btn btn-ghost text-neutral-400",children:[(0,r.jsx)(u.GAI,{}),"d\xe9connexion"]})]})]}),n,(0,r.jsx)("div",{className:"btm-nav bg-primary text-primary-content z-30",children:t.map(e=>(0,r.jsx)(d,{label:e.label,link:e.link,indicator:e.indicator,Icon:e.Icon},e.link))})]})},f=e=>{let{children:n}=e,t=b(),i=(0,a.a)(e=>e.name);return(0,r.jsxs)("div",{className:"hidden md:block",children:[(0,r.jsxs)("div",{className:"navbar bg-primary text-primary-content",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(s.default,{href:h.home,className:"btn btn-ghost text-xl text-white",children:"Drive"}),(0,r.jsx)("div",{className:"m-auto",children:i})]}),(0,r.jsx)("div",{className:"flex-none",children:(0,r.jsxs)("ul",{className:"menu menu-horizontal px-1",children:[t.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(d,{label:e.label,link:e.link,Icon:e.Icon,indicator:e.indicator,classNames:"btn btn-ghost"})},e.link)),(0,r.jsx)("div",{className:"mx-2 border-l border-neutral-400"}),(0,r.jsx)("li",{className:" text-neutral-400",children:(0,r.jsxs)("button",{className:"btn btn-ghost",children:[(0,r.jsx)(u.GAI,{}),"d\xe9connexion"]})})]})})]}),n]})};function N(e){let{children:n}=e,{isAuth:t}=(0,a.a)(e=>e),s=(0,i.useRouter)();return t||s.push(h.login),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{children:n}),(0,r.jsx)(f,{children:n})]})}},3005:function(e,n,t){"use strict";t.d(n,{j:function(){return r}});let r=(0,t(9099).Ue)(e=>({cart:{},addProduct:n=>e(e=>{let t={...e.cart};return t[n]?t[n]++:t[n]=1,{cart:t}}),removeProduct:n=>e(e=>{let t={...e.cart};return delete t[n],{cart:t}})}))},9748:function(e,n,t){"use strict";t.d(n,{a:function(){return a}});var r=t(4451);let a=(0,t(9099).Ue)(e=>({isAuth:!0,name:"Erik Aouizerate",role:r.u.Client,setIsAuth:n=>e(e=>({isAuth:e.isAuth=n})),setUser:n=>e(()=>({name:n.name,isAuth:!0,role:n.role}))}))},4451:function(e,n,t){"use strict";var r,a;t.d(n,{u:function(){return r}}),(a=r||(r={}))[a.Admin=0]="Admin",a[a.Client=1]="Client",a[a.Preparer=2]="Preparer"}},function(e){e.O(0,[994,540,971,23,744],function(){return e(e.s=5944)}),_N_E=e.O()}]);